{
	"info": {
		"_postman_id": "0c0a8fb4-1cbe-4f86-8eb8-50bce0da9026",
		"name": "3.1. Event Director Quick-Check",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "29185806"
	},
	"item": [
		{
			"name": "1. Single transaction now - debtor to creditor - sucessful",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"responseJSON = pm.response.json();\r",
							"let outgoingEventDirectorResult = responseJSON.data;\r",
							"let transaction = outgoingEventDirectorResult.transaction\r",
							"let networkMap = outgoingEventDirectorResult.networkMap\r",
							"let dataCache = outgoingEventDirectorResult.DataCache\r",
							"let metaData = outgoingEventDirectorResult.metaData;\r",
							"let prcgTm = outgoingEventDirectorResult.metaData.prcgTmEventDirector;\r",
							"let msg = networkMap.messages;\r",
							"\r",
							"console.log(`Networkmap message: ${JSON.stringify(msg)}`);\r",
							"\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test('Has a transaction object', function() {\r",
							"  pm.expect(outgoingEventDirectorResult).to.have.property('transaction');\r",
							"});\r",
							"\r",
							"pm.test('Has a networkMap object', function() {\r",
							"  pm.expect(outgoingEventDirectorResult).to.have.property('networkMap');\r",
							"});\r",
							"\r",
							"pm.test('Has a dataCache object', function() {\r",
							"  pm.expect(outgoingEventDirectorResult).to.have.property('DataCache');\r",
							"});\r",
							"\r",
							"pm.test('Has a metaData object', function() {\r",
							"  pm.expect(outgoingEventDirectorResult).to.have.property('metaData');\r",
							"});\r",
							"\r",
							"pm.test('Networkmap message array contains typologies', function() {\r",
							"    pm.expect(msg[0]).to.have.property('typologies');\r",
							"});\r",
							"\r",
							"pm.test('Networkmap message array does not have channels', function() {\r",
							"    pm.expect(msg[0]).to.not.have.property('channels');\r",
							"});\r",
							"\r",
							"pm.test(`Processing time: ${(prcgTm/1000000).toFixed(3)} milliseconds`, function () {\r",
							"    pm.expect(prcgTm).to.be.greaterThan(0);\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"utils.setPm(pm); // set the utils _pm to the pre-request script pm\r",
							"let moment = require('moment');\r",
							"// ## Set up rule config\r",
							"\r",
							"const requestDestination = `event-director`;\r",
							"const responseDestination = `pub-rule-001@1.0.0`;\r",
							"\r",
							"console.log(`Event-Director - Full Network Map`);\r",
							"\r",
							"// ## Set up transaction eco-system\r",
							"\r",
							"/* parameters:\r",
							"    timestampEpoch ( = 0 ): Offset of pacs.002 into the past\r",
							"    amount ( = random up to 1000.00 )\r",
							"    transactionDescription ( = 'Generic payment description' )\r",
							"    pacs002StStS ( = 'ACCC' )\r",
							"    debtorAge ( = 25 )\r",
							"    transactionPurpose ( = 'TRANSFER' )\r",
							"    transactionLat ( = -3.1609 )\r",
							"    transactionLong ( = 38.3588 )n\r",
							"*/\r",
							"\r",
							"utils.createNewTransactionSet();\r",
							"\r",
							"// ## Set up body variables\r",
							"\r",
							"let pacs002Body = pm.globals.get('pacs002');\r",
							"pm.variables.set('pacs002Body', pacs002Body);\r",
							"\r",
							"pm.variables.set('requestDestination', requestDestination);\r",
							"pm.variables.set('responseDestination', responseDestination);\r",
							"\r",
							"console.log(`Paused at ${moment()}`);\r",
							"setTimeout(() => { console.log(`Resumed at ${moment()}`) }, 5000); // Allow async API setup calls to finish."
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"destination\": \"{{requestDestination}}\",\r\n    \"consumer\": \"{{responseDestination}}\",\r\n    \"functionName\": \"{{$randomUUID}}\",\r\n    \"message\": {\r\n        \"transaction\": {{pacs002Body}},\r\n        \"DataCache\": {{dataCache}}\r\n    }\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{natsUrl}}/{{path-event-director}}",
					"host": [
						"{{natsUrl}}"
					],
					"path": [
						"{{path-event-director}}"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"let _pm = null;",
					"",
					"utils = {",
					"    // https://community.postman.com/t/how-to-reuse-function-in-2022/39077/4",
					"    setPm: function (scriptPm) {",
					"        _pm = scriptPm;",
					"    },",
					"",
					"/**",
					" * Converts a time unit to its equivalent in milliseconds.",
					" * ",
					" * Example: `weekInMilliseconds = 7 * utils.timeframe('d');`",
					" *",
					" * @param {string} unit - The time unit to convert. Supported units are 'd'/'days', 'h'/'hours', 'm'/'minutes', and 's'/'seconds'.",
					" * @returns {number} The number of milliseconds corresponding to the given time unit.",
					" */",
					"",
					"    timeframe: function (unit) {",
					"        switch (unit) {",
					"            case 'd':",
					"            case 'days':",
					"                milliseconds = 86400000;",
					"                break;",
					"            case 'h':",
					"            case 'hours':",
					"                milliseconds = 3600000;",
					"                break;",
					"            case 'm':",
					"            case 'minutes':",
					"                milliseconds = 60000;",
					"                break;",
					"            case 's':",
					"            case 'seconds':",
					"                milliseconds = 1000;",
					"                break;",
					"            default: milliseconds = 0;",
					"        }",
					"        return milliseconds;",
					"    },",
					"",
					"/**",
					" * Generates a UUID (Universally Unique Identifier) in ISO format by removing hyphens from a standard UUID.",
					" *",
					" * @returns {string} A UUID in ISO format without hyphens.",
					" */",
					"",
					"    createISOUUID: function () {",
					"        let uuid = require('uuid');",
					"        return uuid.v4().replace(/-/g, '');",
					"    },",
					"",
					"/**",
					" * Asynchronously deletes a specific rule configuration from the database.",
					" *",
					" * @param {string} ruleId - Mandatory. The identifier of the rule whose configuration is to be deleted.",
					" * @param {string} ruleConfigVersion - Mandatory. The version of the rule configuration to be deleted.",
					" */",
					"",
					"    deleteRuleConfig: async function (ruleId, ruleConfigVersion) {",
					"",
					"        const queryString = `FOR cfg IN configuration",
					"        FILTER cfg.id == '${ruleId}'",
					"        AND cfg.cfg == '${ruleConfigVersion}'",
					"        REMOVE cfg._key IN configuration`;",
					"",
					"        const configPostRequest = {",
					"            url: `${_pm.environment.get('arangoUrl')}/_db/${_pm.environment.get('db_config_all')}/_api/cursor`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify({",
					"                    query: queryString",
					"                })",
					"            }",
					"        };",
					"",
					"        await _pm.sendRequest(configPostRequest, (error, response) => {",
					"            console.log(error ? error : response.json());",
					"        });",
					"    },",
					"",
					"/**",
					" * Asynchronously creates a new rule configuration in the database.",
					" *",
					" * @param {object} ruleConfig - Mandatory. The configuration object for the rule to be created.",
					" */",
					"",
					"",
					"    createRuleConfig: async function (ruleConfig) {",
					"",
					"        const configPostRequest = {",
					"            url: `${_pm.environment.get('arangoUrl')}/_db/${_pm.environment.get('db_config_all')}/_api/document/${_pm.environment.get('db_config_rules')}?overwrite=true`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(ruleConfig)",
					"            },",
					"        };",
					"",
					"        await _pm.sendRequest(configPostRequest, (error, response) => {",
					"            console.log(error ? error : response.json());",
					"        });",
					"    },",
					"",
					"/**",
					" * Asynchronously recreates a rule configuration by removing the existing configuration and creating a new one.",
					" *",
					" * @param {string} ruleId - Mandatory. The identifier of the rule whose configuration is to be recreated.",
					" * @param {string} ruleConfigVersion - Mandatory. The version of the rule configuration.",
					" * @param {object} ruleConfig - Mandatory. The new configuration object for the rule.",
					" */",
					"",
					"    recreateRuleConfig: async function (ruleId, ruleConfigVersion, ruleConfig) {",
					"",
					"        const queryString = `FOR cfg IN configuration",
					"        FILTER cfg.id == '${ruleId}'",
					"        AND cfg.cfg == '${ruleConfigVersion}'",
					"        REMOVE cfg._key IN configuration`;",
					"",
					"        const configPostRequest = {",
					"            url: `${_pm.environment.get('arangoUrl')}/_db/${_pm.environment.get('db_config_all')}/_api/cursor`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify({",
					"                    query: queryString",
					"                })",
					"            }",
					"        };",
					"",
					"        await _pm.sendRequest(configPostRequest, (error, response) => {",
					"            console.log(error ? error : response.json());",
					"            utils.createRuleConfig(ruleConfig);",
					"        });",
					"    },",
					"",
					"/**",
					" * Constructs a pain.001.001.11 message for initiating a customer credit transfer.",
					" *",
					" * @param {string} messageIdPain001 - Unique identifier for the message.",
					" * @param {string} timestampPain001 - Timestamp of message creation.",
					" * @param {string} debtorDoB - Date of birth of the debtor.",
					" * @param {string} debtorId - Identifier for the debtor.",
					" * @param {string} debtorAccountId - Account identifier for the debtor.",
					" * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					" * @param {string} transactionPurpose - Purpose of the transaction.",
					" * @param {string} currency - Currency code for the transaction amount.",
					" * @param {number} amount - Transaction amount.",
					" * @param {string} creditorId - Identifier for the creditor.",
					" * @param {string} creditorAccountId - Account identifier for the creditor.",
					" * @param {string} transactionDescription - Description of the transaction.",
					" * @param {string} transactionLat - Latitude coordinate of the transaction location.",
					" * @param {string} transactionLong - Longitude coordinate of the transaction location.",
					" * ",
					" * @returns {object} A pain.001.001.11 message object for customer credit transfer initiation.",
					" */",
					"",
					"    prepPain001Msg: function (messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorAccountId, endToEndId, transactionPurpose, currency, amount, creditorId, creditorAccountId, transactionDescription, transactionLat, transactionLong) {",
					"        return {",
					"            \"TxTp\": \"pain.001.001.11\",",
					"            \"CstmrCdtTrfInitn\": {",
					"                \"GrpHdr\": {",
					"                    \"MsgId\": `${messageIdPain001}`,",
					"                    \"CreDtTm\": `${timestampPain001}`,",
					"                    \"NbOfTxs\": 1,",
					"                    \"InitgPty\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": \"1968-02-01\",",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": {",
					"                                    \"Id\": \"+27730975224\",",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"MSISDN\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    }",
					"                },",
					"                \"PmtInf\": {",
					"                    \"PmtInfId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
					"                    \"PmtMtd\": \"TRA\",",
					"                    \"ReqdAdvcTp\": {",
					"                        \"DbtAdvc\": {",
					"                            \"Cd\": \"ADWD\",",
					"                            \"Prtry\": \"Advice with transaction details\"",
					"                        }",
					"                    },",
					"                    \"ReqdExctnDt\": {",
					"                        \"Dt\": \"2023-06-02\",",
					"                        \"DtTm\": \"2023-06-02T07:50:57.000Z\"",
					"                    },",
					"                    \"Dbtr\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": `${debtorDoB}`,",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": {",
					"                                    \"Id\": `${debtorId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"TAZAMA_EID\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    },",
					"                    \"DbtrAcct\": {",
					"                        \"Id\": {",
					"                            \"Othr\": {",
					"                                \"Id\": `${debtorAccountId}`,",
					"                                \"SchmeNm\": {",
					"                                    \"Prtry\": \"MSISDN\"",
					"                                }",
					"                            }",
					"                        },",
					"                        \"Nm\": \"April Grant\"",
					"                    },",
					"                    \"DbtrAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": \"dfsp001\"",
					"                            }",
					"                        }",
					"                    },",
					"                    \"CdtTrfTxInf\": {",
					"                        \"PmtId\": {",
					"                            \"EndToEndId\": `${endToEndId}`",
					"                        },",
					"                        \"PmtTpInf\": {",
					"                            \"CtgyPurp\": {",
					"                                \"Prtry\": `${transactionPurpose}`",
					"                            }",
					"                        },",
					"                        \"Amt\": {",
					"                            \"InstdAmt\": {",
					"                                \"Amt\": {",
					"                                    \"Amt\": amount,",
					"                                    \"Ccy\": `${currency}`",
					"                                }",
					"                            },",
					"                            \"EqvtAmt\": {",
					"                                \"Amt\": {",
					"                                    \"Amt\": amount,",
					"                                    \"Ccy\": `${currency}`",
					"                                },",
					"                                \"CcyOfTrf\": `${currency}`",
					"                            }",
					"                        },",
					"                        \"ChrgBr\": \"DEBT\",",
					"                        \"CdtrAgt\": {",
					"                            \"FinInstnId\": {",
					"                                \"ClrSysMmbId\": {",
					"                                    \"MmbId\": \"dfsp002\"",
					"                                }",
					"                            }",
					"                        },",
					"                        \"Cdtr\": {",
					"                            \"Nm\": \"Felicia Easton Quill\",",
					"                            \"Id\": {",
					"                                \"PrvtId\": {",
					"                                    \"DtAndPlcOfBirth\": {",
					"                                        \"BirthDt\": \"1935-05-08\",",
					"                                        \"CityOfBirth\": \"Unknown\",",
					"                                        \"CtryOfBirth\": \"ZZ\"",
					"                                    },",
					"                                    \"Othr\": {",
					"                                        \"Id\": `${creditorId}`,",
					"                                        \"SchmeNm\": {",
					"                                            \"Prtry\": \"TAZAMA_EID\"",
					"                                        }",
					"                                    }",
					"                                }",
					"                            },",
					"                            \"CtctDtls\": {",
					"                                \"MobNb\": \"+27-707650428\"",
					"                            }",
					"                        },",
					"                        \"CdtrAcct\": {",
					"                            \"Id\": {",
					"                                \"Othr\": {",
					"                                    \"Id\": `${creditorAccountId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"MSISDN\"",
					"                                    }",
					"                                }",
					"                            },",
					"                            \"Nm\": \"Felicia Quill\"",
					"                        },",
					"                        \"Purp\": {",
					"                            \"Cd\": \"MP2P\"",
					"                        },",
					"                        \"RgltryRptg\": {",
					"                            \"Dtls\": {",
					"                                \"Tp\": \"BALANCE OF PAYMENTS\",",
					"                                \"Cd\": \"100\"",
					"                            }",
					"                        },",
					"                        \"RmtInf\": {",
					"                            \"Ustrd\": `${transactionDescription}`",
					"                        },",
					"                        \"SplmtryData\": {",
					"                            \"Envlp\": {",
					"                                \"Doc\": {",
					"                                    \"Dbtr\": {",
					"                                        \"FrstNm\": \"April\",",
					"                                        \"MddlNm\": \"Blake\",",
					"                                        \"LastNm\": \"Grant\",",
					"                                        \"MrchntClssfctnCd\": \"BLANK\"",
					"                                    },",
					"                                    \"Cdtr\": {",
					"                                        \"FrstNm\": \"Felicia\",",
					"                                        \"MddlNm\": \"Easton\",",
					"                                        \"LastNm\": \"Quill\",",
					"                                        \"MrchntClssfctnCd\": \"BLANK\"",
					"                                    },",
					"                                    \"DbtrFinSvcsPrvdrFees\": {",
					"                                        \"Ccy\": `${currency}`,",
					"                                        \"Amt\": 0.00",
					"                                    },",
					"                                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                },",
					"                \"SplmtryData\": {",
					"                    \"Envlp\": {",
					"                        \"Doc\": {",
					"                            \"InitgPty\": {",
					"                                \"InitrTp\": \"CONSUMER\",",
					"                                \"Glctn\": {",
					"                                    \"Lat\": `${transactionLat}`,",
					"                                    \"Long\": `${transactionLong}`",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                }",
					"            }",
					"        }",
					"    },",
					"",
					"/**",
					" * Constructs a pain.013.001.09 message for initiating a creditor payment activation request.",
					" *",
					" * @param {string} messageIdPain013 - Unique identifier for the message.",
					" * @param {string} timestampPain013 - Timestamp of message creation.",
					" * @param {string} debtorDoB - Date of birth of the debtor.",
					" * @param {string} debtorId - Identifier for the debtor.",
					" * @param {string} debtorAccountId - Account identifier for the debtor.",
					" * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					" * @param {string} currency - Currency code for the transaction amount.",
					" * @param {number} amount - Transaction amount.",
					" * @param {string} creditorId - Identifier for the creditor.",
					" * @param {string} creditorAccountId - Account identifier for the creditor.",
					" * @param {string} transactionLat - Latitude coordinate of the transaction location.",
					" * @param {string} transactionLong - Longitude coordinate of the transaction location.",
					" * ",
					" * @returns {object} A pain.013.001.09 message object for creditor payment activation request.",
					" */",
					"",
					"    prepPain013Msg: function (messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorAccountId, endToEndId, currency, amount, creditorId, creditorAccountId, transactionLat, transactionLong) {",
					"        return {",
					"            \"TxTp\": \"pain.013.001.09\",",
					"            \"CdtrPmtActvtnReq\": {",
					"                \"GrpHdr\": {",
					"                    \"MsgId\": `${messageIdPain013}`,",
					"                    \"CreDtTm\": `${timestampPain013}`,",
					"                    \"NbOfTxs\": 1,",
					"                    \"InitgPty\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": \"1968-02-01\",",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": {",
					"                                    \"Id\": \"+27730975224\",",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"MSISDN\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    }",
					"                },",
					"                \"PmtInf\": {",
					"                    \"PmtInfId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
					"                    \"PmtMtd\": \"TRA\",",
					"                    \"ReqdAdvcTp\": {",
					"                        \"DbtAdvc\": {",
					"                            \"Cd\": \"ADWD\",",
					"                            \"Prtry\": \"Advice with transaction details\"",
					"                        }",
					"                    },",
					"                    \"ReqdExctnDt\": {",
					"                        \"DtTm\": \"2023-06-02T07:51:48.000Z\"",
					"                    },",
					"                    \"XpryDt\": {",
					"                        \"DtTm\": \"2021-11-30T10:38:56.000Z\"",
					"                    },",
					"                    \"Dbtr\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": `${debtorDoB}`,",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": {",
					"                                    \"Id\": `${debtorId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"TAZAMA_EID\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    },",
					"                    \"DbtrAcct\": {",
					"                        \"Id\": {",
					"                            \"Othr\": {",
					"                                \"Id\": `${debtorAccountId}`,",
					"                                \"SchmeNm\": {",
					"                                    \"Prtry\": \"MSISDN\"",
					"                                }",
					"                            }",
					"                        },",
					"                        \"Nm\": \"April Grant\"",
					"                    },",
					"                    \"DbtrAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": \"dfsp001\"",
					"                            }",
					"                        }",
					"                    },",
					"                    \"CdtTrfTxInf\": {",
					"                        \"PmtId\": {",
					"                            \"EndToEndId\": `${endToEndId}`",
					"                        },",
					"                        \"PmtTpInf\": {",
					"                            \"CtgyPurp\": {",
					"                                \"Prtry\": \"TRANSFER BLANK\"",
					"                            }",
					"                        },",
					"                        \"Amt\": {",
					"                            \"InstdAmt\": {",
					"                                \"Amt\": {",
					"                                    \"Amt\": amount,",
					"                                    \"Ccy\": `${currency}`",
					"                                }",
					"                            },",
					"                            \"EqvtAmt\": {",
					"                                \"Amt\": {",
					"                                    \"Amt\": amount,",
					"                                    \"Ccy\": `${currency}`",
					"                                },",
					"                                \"CcyOfTrf\": `${currency}`",
					"                            }",
					"                        },",
					"                        \"ChrgBr\": \"DEBT\",",
					"                        \"CdtrAgt\": {",
					"                            \"FinInstnId\": {",
					"                                \"ClrSysMmbId\": {",
					"                                    \"MmbId\": \"dfsp002\"",
					"                                }",
					"                            }",
					"                        },",
					"                        \"Cdtr\": {",
					"                            \"Nm\": \"Felicia Easton Quill\",",
					"                            \"Id\": {",
					"                                \"PrvtId\": {",
					"                                    \"DtAndPlcOfBirth\": {",
					"                                        \"BirthDt\": \"1935-05-08\",",
					"                                        \"CityOfBirth\": \"Unknown\",",
					"                                        \"CtryOfBirth\": \"ZZ\"",
					"                                    },",
					"                                    \"Othr\": {",
					"                                        \"Id\": `${creditorId}`,",
					"                                        \"SchmeNm\": {",
					"                                            \"Prtry\": \"TAZAMA_EID\"",
					"                                        }",
					"                                    }",
					"                                }",
					"                            },",
					"                            \"CtctDtls\": {",
					"                                \"MobNb\": \"+27-707650428\"",
					"                            }",
					"                        },",
					"                        \"CdtrAcct\": {",
					"                            \"Id\": {",
					"                                \"Othr\": {",
					"                                    \"Id\": `${creditorAccountId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"MSISDN\"",
					"                                    }",
					"                                }",
					"                            },",
					"                            \"Nm\": \"Felicia Quill\"",
					"                        },",
					"                        \"Purp\": {",
					"                            \"Cd\": \"MP2P\"",
					"                        },",
					"                        \"RgltryRptg\": {",
					"                            \"Dtls\": {",
					"                                \"Tp\": \"BALANCE OF PAYMENTS\",",
					"                                \"Cd\": \"100\"",
					"                            }",
					"                        },",
					"                        \"SplmtryData\": {",
					"                            \"Envlp\": {",
					"                                \"Doc\": {",
					"                                    \"PyeeRcvAmt\": {",
					"                                        \"Amt\": {",
					"                                            \"Amt\": 0.00,",
					"                                            \"Ccy\": `${currency}`",
					"                                        }",
					"                                    },",
					"                                    \"PyeeFinSvcsPrvdrFee\": {",
					"                                        \"Amt\": {",
					"                                            \"Amt\": 0.00,",
					"                                            \"Ccy\": `${currency}`",
					"                                        }",
					"                                    },",
					"                                    \"PyeeFinSvcsPrvdrComssn\": {",
					"                                        \"Amt\": {",
					"                                            \"Amt\": 0.00,",
					"                                            \"Ccy\": `${currency}`",
					"                                        }",
					"                                    }",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                },",
					"                \"SplmtryData\": {",
					"                    \"Envlp\": {",
					"                        \"Doc\": {",
					"                            \"InitgPty\": {",
					"                                \"Glctn\": {",
					"                                    \"Lat\": `${transactionLat}`,",
					"                                    \"Long\": `${transactionLong}`",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                }",
					"            }",
					"        }",
					"    },",
					"",
					"/**",
					" * Constructs a pacs.008.001.10 message for initiating a financial institution to financial institution customer credit transfer.",
					" *",
					" * @param {string} messageIdPacs008 - Unique identifier for the message.",
					" * @param {string} timestampPacs008 - Timestamp of message creation.",
					" * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					" * @param {string} currency - Currency code for the transaction amount.",
					" * @param {number} amount - Transaction amount.",
					" * @param {string} debtorDoB - Date of birth of the debtor.",
					" * @param {string} debtorId - Identifier for the debtor.",
					" * @param {string} debtorAccountId - Account identifier for the debtor.",
					" * @param {string} creditorId - Identifier for the creditor.",
					" * @param {string} creditorAccountId - Account identifier for the creditor.",
					" * @param {string} transactionPurpose - Purpose of the transaction.",
					" * @param {string} transactionDescription - Description of the transaction.",
					" * @param {string} transactionLat - Latitude coordinate of the transaction location.",
					" * @param {string} transactionLong - Longitude coordinate of the transaction location.",
					" * ",
					" * @returns {object} A pacs.008.001.10 message object for financial institution to financial institution customer credit transfer.",
					" */",
					"",
					"    prepPacs008Msg: function (messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorAccountId, creditorId, creditorAccountId, transactionPurpose, transactionDescription, transactionLat, transactionLong) {",
					"        return {",
					"            \"TxTp\": \"pacs.008.001.10\",",
					"            \"FIToFICstmrCdt\": {",
					"                \"GrpHdr\": {",
					"                    \"MsgId\": `${messageIdPacs008}`,",
					"                    \"CreDtTm\": `${timestampPacs008}`,",
					"                    \"NbOfTxs\": 1,",
					"                    \"SttlmInf\": {",
					"                        \"SttlmMtd\": \"CLRG\"",
					"                    }",
					"                },",
					"                \"CdtTrfTxInf\": {",
					"                    \"PmtId\": {",
					"                        \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
					"                        \"EndToEndId\": `${endToEndId}`",
					"                    },",
					"                    \"IntrBkSttlmAmt\": {",
					"                        \"Amt\": {",
					"                            \"Amt\": amount,",
					"                            \"Ccy\": `${currency}`",
					"                        }",
					"                    },",
					"                    \"InstdAmt\": {",
					"                        \"Amt\": {",
					"                            \"Amt\": amount,",
					"                            \"Ccy\": `${currency}`",
					"                        }",
					"                    },",
					"                    \"ChrgBr\": \"DEBT\",",
					"                    \"ChrgsInf\": {",
					"                        \"Amt\": {",
					"                            \"Amt\": 0.00,",
					"                            \"Ccy\": `${currency}`",
					"                        },",
					"                        \"Agt\": {",
					"                            \"FinInstnId\": {",
					"                                \"ClrSysMmbId\": {",
					"                                    \"MmbId\": \"dfsp001\"",
					"                                }",
					"                            }",
					"                        }",
					"                    },",
					"                    \"InitgPty\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": \"1968-02-01\",",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": {",
					"                                    \"Id\": \"+27730975224\",",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"MSISDN\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    },",
					"                    \"Dbtr\": {",
					"                        \"Nm\": \"April Blake Grant\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": `${debtorDoB}`,",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": {",
					"                                    \"Id\": `${debtorId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"TAZAMA_EID\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-730975224\"",
					"                        }",
					"                    },",
					"                    \"DbtrAcct\": {",
					"                        \"Id\": {",
					"                            \"Othr\": {",
					"                                \"Id\": `${debtorAccountId}`,",
					"                                \"SchmeNm\": {",
					"                                    \"Prtry\": \"MSISDN\"",
					"                                }",
					"                            }",
					"                        },",
					"                        \"Nm\": \"April Grant\"",
					"                    },",
					"                    \"DbtrAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": \"dfsp001\"",
					"                            }",
					"                        }",
					"                    },",
					"                    \"CdtrAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": \"dfsp002\"",
					"                            }",
					"                        }",
					"                    },",
					"                    \"Cdtr\": {",
					"                        \"Nm\": \"Felicia Easton Quill\",",
					"                        \"Id\": {",
					"                            \"PrvtId\": {",
					"                                \"DtAndPlcOfBirth\": {",
					"                                    \"BirthDt\": \"1935-05-08\",",
					"                                    \"CityOfBirth\": \"Unknown\",",
					"                                    \"CtryOfBirth\": \"ZZ\"",
					"                                },",
					"                                \"Othr\": {",
					"                                    \"Id\": `${creditorId}`,",
					"                                    \"SchmeNm\": {",
					"                                        \"Prtry\": \"TAZAMA_EID\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        \"CtctDtls\": {",
					"                            \"MobNb\": \"+27-707650428\"",
					"                        }",
					"                    },",
					"                    \"CdtrAcct\": {",
					"                        \"Id\": {",
					"                            \"Othr\": {",
					"                                \"Id\": `${creditorAccountId}`,",
					"                                \"SchmeNm\": {",
					"                                    \"Prtry\": \"MSISDN\"",
					"                                }",
					"                            }",
					"                        },",
					"                        \"Nm\": \"Felicia Quill\"",
					"                    },",
					"                    \"Purp\": {",
					"                        \"Cd\": `${transactionPurpose}`",
					"                    }",
					"                },",
					"                \"RgltryRptg\": {",
					"                    \"Dtls\": {",
					"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
					"                        \"Cd\": \"100\"",
					"                    }",
					"                },",
					"                \"RmtInf\": {",
					"                    \"Ustrd\": `${transactionDescription}`",
					"                },",
					"                \"SplmtryData\": {",
					"                    \"Envlp\": {",
					"                        \"Doc\": {",
					"                            \"Xprtn\": \"2021-11-30T10:38:56.000Z\",",
					"                            \"InitgPty\": {",
					"                                \"Glctn\":",
					"                                {",
					"                                    \"Lat\": `${transactionLat}`,",
					"                                    \"Long\": `${transactionLong}`",
					"                                }",
					"                            }",
					"                        }",
					"                    }",
					"                }",
					"            }",
					"        }",
					"    },",
					"",
					"/**",
					" * Constructs a pacs.002.001.12 message for financial institution to financial institution payment status reporting.",
					" *",
					" * @param {string} messageIdPacs002 - Unique identifier for the message.",
					" * @param {string} timestampPacs002 - Timestamp of message creation.",
					" * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					" * @param {string} pacs002Sts - Transaction status.",
					" * ",
					" * @returns {object} A pacs.002.001.12 message object for financial institution to financial institution payment status reporting.",
					" */",
					"",
					"    prepPacs002Msg: function (messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts) {",
					"        return {",
					"            \"TxTp\": \"pacs.002.001.12\",",
					"            \"FIToFIPmtSts\": {",
					"                \"GrpHdr\": {",
					"                    \"MsgId\": `${messageIdPacs002}`,",
					"                    \"CreDtTm\": `${timestampPacs002}`",
					"                },",
					"                \"TxInfAndSts\": {",
					"                    \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
					"                    \"OrgnlEndToEndId\": `${endToEndId}`,",
					"                    \"TxSts\": `${pacs002Sts}`,",
					"                    \"ChrgsInf\": [",
					"                        {",
					"                            \"Amt\": {",
					"                                \"Amt\": 0.00,",
					"                                \"Ccy\": \"USD\"",
					"                            },",
					"                            \"Agt\": {",
					"                                \"FinInstnId\": {",
					"                                    \"ClrSysMmbId\": {",
					"                                        \"MmbId\": \"dfsp001\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        {",
					"                            \"Amt\": {",
					"                                \"Amt\": 0.00,",
					"                                \"Ccy\": \"USD\"",
					"                            },",
					"                            \"Agt\": {",
					"                                \"FinInstnId\": {",
					"                                    \"ClrSysMmbId\": {",
					"                                        \"MmbId\": \"dfsp001\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        },",
					"                        {",
					"                            \"Amt\": {",
					"                                \"Amt\": 0.00,",
					"                                \"Ccy\": \"USD\"",
					"                            },",
					"                            \"Agt\": {",
					"                                \"FinInstnId\": {",
					"                                    \"ClrSysMmbId\": {",
					"                                        \"MmbId\": \"dfsp002\"",
					"                                    }",
					"                                }",
					"                            }",
					"                        }",
					"                    ],",
					"                    \"AccptncDtTm\": \"2023-06-02T07:52:31.000Z\",",
					"                    \"InstgAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": \"dfsp001\"",
					"                            }",
					"                        }",
					"                    },",
					"                    \"InstdAgt\": {",
					"                        \"FinInstnId\": {",
					"                            \"ClrSysMmbId\": {",
					"                                \"MmbId\": \"dfsp002\"",
					"                            }",
					"                        }",
					"                    }",
					"                }",
					"            }",
					"        }",
					"    },",
					"",
					"/**",
					" * Constructs an array of graph entities for a debtor and a creditor.",
					" *",
					" * @param {string} debtorId - Identifier for the debtor.",
					" * @param {string} creditorId - Identifier for the creditor.",
					" * @param {string} timestamp - Timestamp of entity creation.",
					" * ",
					" * @returns {Array} An array of graph entities, each containing an identifier and a creation timestamp.",
					" */",
					"",
					"    prepGraphEntities: function (debtorId, creditorId, timestamp) {",
					"        return [{",
					"            \"_key\": `${debtorId}`,",
					"            \"Id\": `${debtorId}`,",
					"            \"CreDtTm\": `${timestamp}`",
					"        }, {",
					"            \"_key\": `${creditorId}`,",
					"            \"Id\": `${creditorId}`,",
					"            \"CreDtTm\": `${timestamp}`",
					"        }]",
					"    },",
					"",
					"/**",
					" * Constructs an array of graph relationships between account holders and their accounts.",
					" *",
					" * @param {string} entitiesPrefix - Prefix for entity identifiers in the graph.",
					" * @param {string} accountsPrefix - Prefix for account identifiers in the graph.",
					" * @param {string} debtorId - Identifier for the debtor.",
					" * @param {string} debtorAccountId - Account identifier for the debtor.",
					" * @param {string} creditorId - Identifier for the creditor.",
					" * @param {string} creditorAccountId - Account identifier for the creditor.",
					" * @param {string} timestamp - Timestamp of relationship creation.",
					" * ",
					" * @returns {Array} An array of graph relationships, each connecting an account holder to their account.",
					" */",
					"",
					"    prepGraphAccountHolders: function (entitiesPrefix, accountsPrefix, debtorId, debtorAccountId, creditorId, creditorAccountId, timestamp) {",
					"        return [{",
					"            \"_key\": `${debtorId}` + `${debtorAccountId}`,",
					"            \"_from\": `${entitiesPrefix}` + `${debtorId}`,",
					"            \"_to\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"            \"CreDtTm\": `${timestamp}`",
					"        },",
					"        {",
					"            \"_key\": `${creditorId}` + `${creditorAccountId}`,",
					"            \"_from\": `${entitiesPrefix}` + `${creditorId}`,",
					"            \"_to\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"            \"CreDtTm\": `${timestamp}`",
					"        }]",
					"    },",
					"",
					"/**",
					" * Constructs an array of graph nodes for debtor and creditor accounts.",
					" *",
					" * @param {string} debtorAccountId - Account identifier for the debtor.",
					" * @param {string} creditorAccountId - Account identifier for the creditor.",
					" * ",
					" * @returns {Array} An array of graph nodes, each representing an account with a unique identifier.",
					" */",
					"",
					"    prepGraphAccounts: function (debtorAccountId, creditorAccountId) {",
					"        return [{",
					"            \"_key\": debtorAccountId,",
					"        }, {",
					"            \"_key\": creditorAccountId,",
					"        }]",
					"    },",
					"",
					"/**",
					" * Constructs an array of graph transactions between debtor and creditor accounts, including various transaction types.",
					" *",
					" * @param {string} accountsPrefix - Prefix for account identifiers in the graph.",
					" * @param {string} debtorAccountId - Account identifier for the debtor.",
					" * @param {string} creditorAccountId - Account identifier for the creditor.",
					" * @param {string} currency - Currency code for the transaction amount.",
					" * @param {number} amount - Transaction amount.",
					" * @param {string} endToEndId - Unique end-to-end transaction identifier.",
					" * @param {string} timestampPacs008 - Timestamp of pacs.008.001.10 message creation.",
					" * @param {string} messageIdPacs008 - Unique identifier for the pacs.008.001.10 message.",
					" * @param {string} timestampPacs002 - Timestamp of pacs.002.001.12 message creation.",
					" * @param {string} messageIdPacs002 - Unique identifier for the pacs.002.001.12 message.",
					" * @param {string} pacs002Sts - Transaction status for pacs.002.001.12 message.",
					" * @param {string} timestampPain001 - Timestamp of pain.001.001.11 message creation.",
					" * @param {string} messageIdPain001 - Unique identifier for the pain.001.001.11 message.",
					" * @param {string} timestampPain013 - Timestamp of pain.013.001.09 message creation.",
					" * @param {string} messageIdPain013 - Unique identifier for the pain.013.001.09 message.",
					" * ",
					" * @returns {Array} An array of graph transactions, each representing a transaction between debtor and creditor accounts.",
					" */",
					"",
					"    prepGraphTransactions: function (accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013) {",
					"",
					"        var transactions = [];",
					"",
					"        if (typeof timestampPain001 !== \"undefined\") {",
					"            transactions.push({",
					"                \"_from\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                \"_to\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                \"TxTp\": \"pain.001.001.11\",",
					"                \"CreDtTm\": `${timestampPain001}`,",
					"                \"Amt\": amount,",
					"                \"Ccy\": `${currency}`,",
					"                \"PmtInfId\": `${messageIdPain001}`,",
					"                \"EndToEndId\": `${endToEndId}`",
					"            });",
					"            transactions.push({",
					"                \"_from\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                \"_to\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                \"TxTp\": \"pain.013.001.09\",",
					"                \"CreDtTm\": `${timestampPain013}`,",
					"                \"Amt\": amount,",
					"                \"Ccy\": `${currency}`,",
					"                \"PmtInfId\": `${messageIdPain013}`,",
					"                \"EndToEndId\": `${endToEndId}`",
					"            });",
					"        }",
					"",
					"        transactions.push({",
					"            \"_from\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"            \"_to\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"            \"TxTp\": \"pacs.008.001.10\",",
					"            \"CreDtTm\": `${timestampPacs008}`,",
					"            \"Amt\": amount,",
					"            \"Ccy\": `${currency}`,",
					"            \"PmtInfId\": `${messageIdPacs008}`,",
					"            \"EndToEndId\": `${endToEndId}`",
					"        });",
					"",
					"        if (typeof timestampPacs002 !== \"undefined\") {",
					"            transactions.push({",
					"                \"_from\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                \"_to\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                \"TxTp\": \"pacs.002.001.12\",",
					"                \"TxSts\": `${pacs002Sts}`,",
					"                \"CreDtTm\": `${timestampPacs002}`,",
					"                \"PmtInfId\": `${messageIdPacs002}`,",
					"                \"EndToEndId\": `${endToEndId}`",
					"            });",
					"        }",
					"",
					"        return transactions",
					"    },",
					"",
					"/**",
					" * Creates a new set of transactions for testing purposes, including all necessary data and database operations.",
					" * The transaction set will include pain.001/013 messages if the environment variable activePain001 = true.",
					" * The transaction set will contain a pacs.008 and a pacs.002 message.",
					" * The messages in the set will be linked through the same EndToEndId.",
					" * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					" *",
					" * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					" * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					" * @param {number|null|undefined} [amount] - Transaction amount. Defaults to a random value between 10 and 1000.",
					" * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction. Defaults to 'Generic payment description'.",
					" * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successful transaction).",
					" * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					" * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					" * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					" * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					" */",
					"",
					"    createNewTransactionSet: function (timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        let uuid = require('uuid');",
					"",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_messagehistory = _pm.environment.get('db_messagehistory');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_transactions = _pm.environment.get('db_coll_graph_transactions');",
					"        const db_coll_graph_entities = _pm.environment.get('db_coll_graph_entities');",
					"        const db_coll_graph_accounts = _pm.environment.get('db_coll_graph_accounts');",
					"        const db_coll_graph_account_holders = _pm.environment.get('db_coll_graph_account_holders');",
					"",
					"        var db_coll_msg_transactionHistoryPain001;",
					"        var db_coll_msg_transactionHistoryPain013;",
					"        if (activePain001) {",
					"            db_coll_msg_transactionHistoryPain001 = _pm.environment.get('db_coll_msg_transactionHistoryPain001');",
					"            db_coll_msg_transactionHistoryPain013 = _pm.environment.get('db_coll_msg_transactionHistoryPain013');",
					"        }",
					"        const db_coll_msg_transactionHistoryPacs008 = _pm.environment.get('db_coll_msg_transactionHistoryPacs008');",
					"        const db_coll_msg_transactionHistoryPacs002 = _pm.environment.get('db_coll_msg_transactionHistoryPacs002');",
					"        const accountsPrefix = 'accounts/';",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = 'dbtr_' + uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = 'dbtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let creditorId = 'cdtr_' + uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = 'cdtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        console.log(\"pacs.002 payload timestamp: \" + timestampPacs002);",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"            pain001 = [utils.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorAccountId, endToEndId, transactionPurpose, currency, amount, creditorId, creditorAccountId, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [utils.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorAccountId, endToEndId, currency, amount, creditorId, creditorAccountId, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [utils.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorAccountId, creditorId, creditorAccountId, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"        const pacs002 = [utils.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        const pacs002TriggerPayload = pacs002;",
					"",
					"        const dataCache = [{",
					"            \"dbtrId\": `${debtorId}`,",
					"            \"cdtrId\": `${creditorId}`,",
					"            \"dbtrAcctId\": `${debtorAccountId}`,",
					"            \"cdtrAcctId\": `${creditorAccountId}`,",
					"            \"creDtTm\": `${baseCreDtTm}`,",
					"            \"amt\": {",
					"                \"amt\": amount,",
					"                \"ccy\": `${currency}`",
					"            }",
					"        }];",
					"",
					"        const accounts = utils.prepGraphAccounts(debtorAccountId, creditorAccountId);",
					"",
					"        var postRequests = [];",
					"        var account_holders = [];",
					"        var entities = [];",
					"        var transactions = [];",
					"",
					"        if (activePain001) {",
					"            entities = utils.prepGraphEntities(debtorId, creditorId, timestampPain001);",
					"            account_holders = utils.prepGraphAccountHolders(entitiesPrefix, accountsPrefix, debtorId, debtorAccountId, creditorId, creditorAccountId, timestampPain001);",
					"            transactions = utils.prepGraphTransactions(accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013);",
					"",
					"            postRequests = [{",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain001}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pain001)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain013}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pain013)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs008)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs002)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(accounts)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(entities)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(transactions)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(account_holders)",
					"                }",
					"            }];",
					"        } else {",
					"            entities = utils.prepGraphEntities(debtorId, creditorId, timestampPacs008);",
					"            account_holders = utils.prepGraphAccountHolders(entitiesPrefix, accountsPrefix, debtorId, debtorAccountId, creditorId, creditorAccountId, timestampPacs008);",
					"            transactions = utils.prepGraphTransactions(accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts);",
					"",
					"            postRequests = [{",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs008)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs002)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(accounts)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(entities)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(transactions)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(account_holders)",
					"                }",
					"            }];",
					"            console.log(postRequests);",
					"        }",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"",
					"        console.log('pacs.002 trigger payload: ' + JSON.stringify(pacs002TriggerPayload[0]));",
					"",
					"        _pm.globals.set(\"pacs002\", JSON.stringify(pacs002TriggerPayload[0]));",
					"        _pm.globals.set(\"dataCache\", JSON.stringify(dataCache[0]));",
					"        _pm.globals.set('debtorId', debtorId);",
					"        _pm.globals.set('debtorAccountId', debtorAccountId);",
					"        _pm.globals.set('debtorDoB', debtorDoB);",
					"        _pm.globals.set('creditorId', creditorId);",
					"        _pm.globals.set('creditorAccountId', creditorAccountId);",
					"        _pm.globals.set('timestampPacs008', timestampPacs008);",
					"        _pm.globals.set('timestampPacs002', timestampPacs002);",
					"        _pm.globals.set('endToEndId', endToEndId);",
					"        _pm.globals.set('pacs002Sts', pacs002Sts);",
					"        _pm.globals.set('currency', currency);",
					"        _pm.globals.set('amount', amount);",
					"        _pm.globals.set('transactionDescription', transactionDescription);",
					"        _pm.globals.set('transactionPurpose', transactionPurpose);",
					"        _pm.globals.set('transactionLat', transactionLat);",
					"        _pm.globals.set('transactionLong', transactionLong);",
					"        _pm.globals.set('messageIdPacs008', messageIdPacs008);",
					"        _pm.globals.set('messageIdPacs002', messageIdPacs002);",
					"        _pm.globals.set('baseTimestamp', timestampPacs008);",
					"        if (activePain001) {",
					"            _pm.globals.set('timestampPain001', timestampPain001);",
					"            _pm.globals.set('timestampPain013', timestampPain013);",
					"            _pm.globals.set('messageIdPain001', messageIdPain001);",
					"            _pm.globals.set('messageIdPain013', messageIdPain013);",
					"            _pm.globals.set('baseTimestamp', timestampPain001);",
					"        }",
					"",
					"        console.log(`",
					"{",
					"  \"DataCache\": {",
					"    \"dbtrId\": \"${_pm.globals.get(\"debtorId\")}\",",
					"    \"cdtrId\": \"${_pm.globals.get(\"creditorId\")}\",",
					"    \"dbtrAcctId\": \"${_pm.globals.get(\"debtorAccountId\")}\",",
					"    \"cdtrAcctId\": \"${_pm.globals.get(\"creditorAccountId\")}\"",
					"    \"creDtTm\": \"${_pm.globals.get(\"baseTimestamp\")}\",",
					"    \"amt\": {",
					"        \"amt\": ${_pm.globals.get(\"amount\")},",
					"        \"curr\": \"${_pm.globals.get(\"currency\")}\"",
					"  },",
					"  \"endToEndId\": \"${_pm.globals.get(\"endToEndId\")}\"",
					"}",
					"        `);",
					"",
					"    },",
					"",
					"/**",
					" * Creates a new set of transactions for testing purposes, excluding pacs.002.001.12 messages, and includes all necessary data and database operations.",
					" * The transaction set will include pain.001/013 messages if the environment variable activePain001 = true.",
					" * The transaction set will contain a pacs.008 message.",
					" * The messages in the set will be linked through the same EndToEndId.",
					" * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					" *",
					" * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					" * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					" * @param {number|null|undefined} [amount] - Transaction amount. Defaults to a random value between 10 and 1000.",
					" * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction. Defaults to 'Generic payment description'.",
					" * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC'.",
					" * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					" * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					" * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					" * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					" */",
					"",
					"    createNewTransactionSetWithoutPacs002: function (timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        let uuid = require('uuid');",
					"",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_messagehistory = _pm.environment.get('db_messagehistory');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_transactions = _pm.environment.get('db_coll_graph_transactions');",
					"        const db_coll_graph_entities = _pm.environment.get('db_coll_graph_entities');",
					"        const db_coll_graph_accounts = _pm.environment.get('db_coll_graph_accounts');",
					"        const db_coll_graph_account_holders = _pm.environment.get('db_coll_graph_account_holders');",
					"        const db_coll_msg_transactionHistoryPacs008 = _pm.environment.get('db_coll_msg_transactionHistoryPacs008');",
					"        const db_coll_msg_transactionHistoryPacs002 = _pm.environment.get('db_coll_msg_transactionHistoryPacs002');",
					"        const accountsPrefix = 'accounts/';",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = 'dbtr_' + uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = 'dbtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let creditorId = 'cdtr_' + uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = 'cdtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        console.log(\"pacs.002 payload timestamp: \" + timestampPacs002);",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"",
					"        var db_coll_msg_transactionHistoryPain001;",
					"        var db_coll_msg_transactionHistoryPain013;",
					"",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            db_coll_msg_transactionHistoryPain001 = _pm.environment.get('db_coll_msg_transactionHistoryPain001');",
					"            db_coll_msg_transactionHistoryPain013 = _pm.environment.get('db_coll_msg_transactionHistoryPain013');",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"            pain001 = [utils.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorAccountId, endToEndId, transactionPurpose, currency, amount, creditorId, creditorAccountId, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [utils.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorAccountId, endToEndId, currency, amount, creditorId, creditorAccountId, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [utils.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorAccountId, creditorId, creditorAccountId, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"        const pacs002 = [utils.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        const pacs002TriggerPayload = pacs002;",
					"",
					"        const dataCache = [{",
					"            \"dbtrId\": `${debtorId}`,",
					"            \"cdtrId\": `${creditorId}`,",
					"            \"dbtrAcctId\": `${debtorAccountId}`,",
					"            \"cdtrAcctId\": `${creditorAccountId}`,",
					"            \"creDtTm\": `${baseCreDtTm}`,",
					"            \"amt\": {",
					"                \"amt\": amount,",
					"                \"ccy\": `${currency}`",
					"            }",
					"        }];",
					"",
					"        const accounts = utils.prepGraphAccounts(debtorAccountId, creditorAccountId);",
					"",
					"        var postRequests = [];",
					"        var account_holders = [];",
					"        var entities = [];",
					"        var transactions = [];",
					"",
					"        if (activePain001) {",
					"            entities = utils.prepGraphEntities(debtorId, creditorId, timestampPain001);",
					"            account_holders = utils.prepGraphAccountHolders(entitiesPrefix, accountsPrefix, debtorId, debtorAccountId, creditorId, creditorAccountId, timestampPain001);",
					"            transactions = utils.prepGraphTransactions(accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, undefined, undefined, undefined, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013);",
					"",
					"            postRequests = [{",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain001}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pain001)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain013}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pain013)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs008)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(accounts)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(entities)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(transactions)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(account_holders)",
					"                }",
					"            }];",
					"        } else {",
					"            entities = utils.prepGraphEntities(debtorId, creditorId, timestampPacs008);",
					"            account_holders = utils.prepGraphAccountHolders(entitiesPrefix, accountsPrefix, debtorId, debtorAccountId, creditorId, creditorAccountId, timestampPacs008);",
					"            transactions = utils.prepGraphTransactions(accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008);",
					"",
					"            postRequests = [{",
					"                url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(pacs008)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(accounts)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(entities)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(transactions)",
					"                }",
					"            }, {",
					"                url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"                method: 'POST',",
					"                header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                body: {",
					"                    mode: 'raw',",
					"                    raw: JSON.stringify(account_holders)",
					"                }",
					"            }];",
					"        }",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"",
					"        console.log('pacs.002 trigger payload for Data Preparation: ' + JSON.stringify(pacs002TriggerPayload[0]));",
					"",
					"        _pm.globals.set(\"pacs002DataPrep\", JSON.stringify(pacs002TriggerPayload[0]));",
					"        _pm.globals.set(\"dataCache\", JSON.stringify(dataCache[0]));",
					"        _pm.globals.set('debtorId', debtorId);",
					"        _pm.globals.set('debtorAccountId', debtorAccountId);",
					"        _pm.globals.set('debtorDoB', debtorDoB);",
					"        _pm.globals.set('creditorId', creditorId);",
					"        _pm.globals.set('creditorAccountId', creditorAccountId);",
					"        _pm.globals.set('timestampPacs008', timestampPacs008);",
					"        _pm.globals.set('timestampPacs002', timestampPacs002);",
					"        _pm.globals.set('endToEndId', endToEndId);",
					"        _pm.globals.set('pacs002Sts', pacs002Sts);",
					"        _pm.globals.set('currency', currency);",
					"        _pm.globals.set('amount', amount);",
					"        _pm.globals.set('transactionDescription', transactionDescription);",
					"        _pm.globals.set('transactionPurpose', transactionPurpose);",
					"        _pm.globals.set('transactionLat', transactionLat);",
					"        _pm.globals.set('transactionLong', transactionLong);",
					"        _pm.globals.set('messageIdPacs008', messageIdPacs008);",
					"        _pm.globals.set('messageIdPacs002', messageIdPacs002);",
					"        _pm.globals.set('baseTimestamp', timestampPacs008);",
					"        if (activePain001) {",
					"            _pm.globals.set('timestampPain001', timestampPain001);",
					"            _pm.globals.set('timestampPain013', timestampPain013);",
					"            _pm.globals.set('messageIdPain001', messageIdPain001);",
					"            _pm.globals.set('messageIdPain013', messageIdPain013);",
					"            _pm.globals.set('baseTimestamp', timestampPain001);",
					"        }",
					"",
					"        console.log(`",
					"{",
					"  \"DataCache\": {",
					"    \"dbtrId\": \"${_pm.globals.get(\"debtorId\")}\",",
					"    \"cdtrId\": \"${_pm.globals.get(\"creditorId\")}\",",
					"    \"dbtrAcctId\": \"${_pm.globals.get(\"debtorAccountId\")}\",",
					"    \"cdtrAcctId\": \"${_pm.globals.get(\"creditorAccountId\")}\"",
					"    \"creDtTm\": \"${_pm.globals.get(\"baseTimestamp\")}\",",
					"    \"amt\": {",
					"        \"amt\": ${_pm.globals.get(\"amount\")},",
					"        \"curr\": \"${_pm.globals.get(\"currency\")}\"",
					"  },",
					"  \"endToEndId\": \"${_pm.globals.get(\"endToEndId\")}\"",
					"}",
					"        `);",
					"",
					"    },",
					"",
					"/**",
					" * Creates multiple sets of transactions for testing purposes, each with its own unique identifiers and timestamps, and includes all necessary data and database operations.",
					" * The transaction sets will include pain.001/013 messages if the environment variable activePain001 = true.",
					" * The transaction set will contain a pacs.008 and a pacs.002 message.",
					" * The messages in the set will be linked through the same EndToEndId.",
					" * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					" *",
					" * @param {number|null|undefined} [numberOfSets=1] - The number of transaction sets to create. Defaults to 1.",
					" * @param {string|null|undefined} [debtorIdRef=null] - Reference identifier for the debtor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					" * @param {string|null|undefined} [debtorAccountIdRef=null] - Reference account identifier for the debtor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					" * @param {string|null|undefined} [creditorIdRef=null] - Reference identifier for the creditor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					" * @param {string|null|undefined} [creditorAccountIdRef=null] - Reference account identifier for the creditor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					" * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					" * @param {number|null|undefined} [timestampIterationLeap] - The leap in milliseconds between each transaction set's timestamp. Defaults to the total epoch divided by the number of sets or 0 if only one set is created.",
					" * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					" * @param {number|null|undefined} [amountRef=null] - Reference amount for the transaction. If provided, this amount will be used for all transaction sets. Defaults to null, which means a random amount will be generated for each set.",
					" * @param {string|null|undefined} [transactionDescriptionRef=null] - Reference description for the transaction. If provided, this description will be used for all transaction sets. Defaults to null, which means a random description will be generated for each set.",
					" * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successul transaction).",
					" * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					" * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					" * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					" * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					" */",
					"",
					"    createMoreTransactionSets: function (numberOfSets, debtorIdRef, debtorAccountIdRef, creditorIdRef, creditorAccountIdRef, timestampEpoch, timestampIterationLeap, currency, amountRef, transactionDescriptionRef, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"        let uuid = require('uuid');",
					"",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_messagehistory = _pm.environment.get('db_messagehistory');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_transactions = _pm.environment.get('db_coll_graph_transactions');",
					"",
					"        var db_coll_msg_transactionHistoryPain001;",
					"        var db_coll_msg_transactionHistoryPain013;",
					"        if (activePain001) {",
					"            db_coll_msg_transactionHistoryPain001 = _pm.environment.get('db_coll_msg_transactionHistoryPain001');",
					"            db_coll_msg_transactionHistoryPain013 = _pm.environment.get('db_coll_msg_transactionHistoryPain013');",
					"        }",
					"        const db_coll_msg_transactionHistoryPacs008 = _pm.environment.get('db_coll_msg_transactionHistoryPacs008');",
					"        const db_coll_msg_transactionHistoryPacs002 = _pm.environment.get('db_coll_msg_transactionHistoryPacs002');",
					"        const accountsPrefix = 'accounts/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        numberOfSets = numberOfSets ? numberOfSets : 1;",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        if (numberOfSets == 1) {",
					"            timestampIterationLeap = 0",
					"        } else {",
					"            timestampIterationLeap = timestampIterationLeap ? timestampIterationLeap : Math.trunc(timestampEpoch / numberOfSets)",
					"        }",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        timestampEpochStart = timestampEpoch;",
					"",
					"        for (let step = 0; step < numberOfSets; step++) {",
					"            // Match incoming parameter or randomise",
					"            let debtorId = debtorIdRef || 'dbtr_' + uuid.v4().replace(/-/g, '');",
					"            let debtorAccountId = debtorAccountIdRef || 'dbtrAcct_' + uuid.v4().replace(/-/g, '');",
					"            let creditorId = creditorIdRef || 'cdtr_' + uuid.v4().replace(/-/g, '');",
					"            let creditorAccountId = creditorAccountIdRef || 'cdtrAcct_' + uuid.v4().replace(/-/g, '');",
					"            let amount = amountRef || Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"            let transactionDescription = transactionDescriptionRef || uuid.v4().replace(/-/g, '');",
					"            let timestampPacs008 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 1)).toISOString();",
					"            let timestampPacs002 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 0)).toISOString();",
					"",
					"            if (!debtorIdRef) {",
					"                utils.createEntity(debtorId);",
					"            }",
					"            if (!creditorIdRef) {",
					"                utils.createEntity(creditorId);",
					"            }",
					"            if (!debtorAccountIdRef) {",
					"                utils.createSingleAccount(debtorId, debtorAccountId, timestampPacs008);",
					"            }",
					"            if (!creditorAccountIdRef) {",
					"                utils.createSingleAccount(creditorId, creditorAccountId, timestampPacs008);",
					"            }",
					"",
					"            let endToEndId = uuid.v4().replace(/-/g, '');",
					"            let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"            let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"            var timestampPain001;",
					"            var timestampPain013;",
					"            var messageIdPain001;",
					"            var messageIdPain013;",
					"",
					"            var pain001;",
					"            var pain013;",
					"",
					"            if (activePain001) {",
					"                timestampPain001 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 3)).toISOString();",
					"                timestampPain013 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 2)).toISOString();",
					"                messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"                messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"                pain001 = [utils.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorAccountId, endToEndId, transactionPurpose, currency, amount, creditorId, creditorAccountId, transactionDescription, transactionLat, transactionLong)];",
					"",
					"                pain013 = [utils.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorAccountId, endToEndId, currency, amount, creditorId, creditorAccountId, transactionLat, transactionLong)];",
					"            }",
					"",
					"            const pacs008 = [utils.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorAccountId, creditorId, creditorAccountId, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            const pacs002 = [utils.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"            var transactions = [];",
					"            var postRequests = [];",
					"",
					"            if (activePain001) {",
					"                transactions = utils.prepGraphTransactions(accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013);",
					"",
					"                postRequests = [{",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain001}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pain001)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain013}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pain013)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs008)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs002)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(transactions)",
					"                    }",
					"                }];",
					"            } else {",
					"                let transactions = [{",
					"                    \"_from\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                    \"_to\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                    \"TxTp\": \"pacs.008.001.10\",",
					"                    \"CreDtTm\": `${timestampPacs008}`,",
					"                    \"Amt\": amount,",
					"                    \"Ccy\": \"USD\",",
					"                    \"PmtInfId\": `${messageIdPacs008}`,",
					"                    \"EndToEndId\": `${endToEndId}`",
					"                },",
					"                {",
					"                    \"_from\": `${accountsPrefix}` + `${creditorAccountId}`,",
					"                    \"_to\": `${accountsPrefix}` + `${debtorAccountId}`,",
					"                    \"TxTp\": \"pacs.002.001.12\",",
					"                    \"TxSts\": `${pacs002Sts}`,",
					"                    \"CreDtTm\": `${timestampPacs002}`,",
					"                    \"PmtInfId\": `${messageIdPacs002}`,",
					"                    \"EndToEndId\": `${endToEndId}`",
					"                }]",
					"",
					"                postRequests = [{",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs008)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs002)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(transactions)",
					"                    }",
					"                }];",
					"            }",
					"",
					"            postRequests.forEach((postRequest) => {",
					"                _pm.sendRequest(postRequest, (error, response) => {",
					"                    console.log(error ? error : response.json());",
					"                });",
					"            });",
					"",
					"            if (activePain001) {",
					"                console.log(`Created transaction set ${step + 1}/${numberOfSets} from ${debtorAccountId} to ${creditorAccountId} from pain.001:${timestampPain001} to pacs.002:${timestampPacs002} with EndToEndId ${endToEndId}`);",
					"            } else {",
					"                console.log(`Created transaction set ${step + 1}/${numberOfSets} from ${debtorAccountId} to ${creditorAccountId} from pacs.008:${timestampPacs008} to pacs.002${timestampPacs002} with EndToEndId ${endToEndId}`);",
					"            }",
					"",
					"        }",
					"    },",
					"",
					"/**",
					" * Creates multiple new accounts for a given entity and updates the graph database with the new accounts and their relationships to the entity.",
					" *",
					" * @param {string} entityId - Mandatory. Identifier for the entity to which the accounts will be associated.",
					" * @param {number|null|undefined} [numberOfAccounts=0] - The number of new accounts to create. Defaults to 0.",
					" */",
					"",
					"    createMoreAccounts: function (entityId, numberOfAccounts) {",
					"        let uuid = require('uuid');",
					"",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_accounts = _pm.environment.get('db_coll_graph_accounts');",
					"        const db_coll_graph_account_holders = _pm.environment.get('db_coll_graph_account_holders');",
					"        const accountsPrefix = 'accounts/';",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        numberOfAccounts = numberOfAccounts ? numberOfAccounts : 0;",
					"",
					"        let timestamp = new Date(new Date(Date.now())).toISOString();",
					"",
					"        const accountIds = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            accountIds.push('acct_' + uuid.v4().replace(/-/g, ''));",
					"        }",
					"",
					"        const accounts = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            accounts.push({ \"_key\": accountIds[step] })",
					"        }",
					"",
					"        const account_holders = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            account_holders.push({",
					"                \"_key\": `${entityId}+${accountIds[step]}`,",
					"                \"_from\": `${entitiesPrefix}` + `${entityId}`,",
					"                \"_to\": `${accountsPrefix}` + `${accountIds[step]}`,",
					"                \"CreDtTm\": timestamp",
					"            });",
					"        }",
					"",
					"        postRequests = [{",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(accounts)",
					"            }",
					"        }, {",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(account_holders)",
					"            }",
					"        }];",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"    },",
					"",
					"/**",
					" * Creates a single new account for a given entity and updates the graph database with the new account and its relationship to the entity.",
					" *",
					" * @param {string} entityId - Mandatory. Identifier for the entity to which the account will be associated.",
					" * @param {string} accountId - Mandatory. Identifier for the new account.",
					" * @param {string|null|undefined} [timestamp] - Timestamp for the creation of the account. Defaults to the current timestamp.",
					" */",
					"",
					"    createSingleAccount: function (entityId, accountId, timestamp) {",
					"        let uuid = require('uuid');",
					"",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_accounts = _pm.environment.get('db_coll_graph_accounts');",
					"        const db_coll_graph_account_holders = _pm.environment.get('db_coll_graph_account_holders');",
					"        const accountsPrefix = 'accounts/';",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        const numberOfAccounts = 1;",
					"",
					"        timestamp = timestamp ? timestamp : new Date(new Date(Date.now())).toISOString();",
					"",
					"        const accountIds = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            accountIds.push(accountId);",
					"        }",
					"",
					"        const accounts = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            accounts.push({ \"_key\": accountIds[step] })",
					"        }",
					"",
					"        const account_holders = [];",
					"        for (let step = 0; step < numberOfAccounts; step++) {",
					"            account_holders.push({",
					"                \"_from\": `${entitiesPrefix}` + `${entityId}`,",
					"                \"_to\": `${accountsPrefix}` + `${accountIds[step]}`,",
					"                \"CreDtTm\": `${timestamp}`",
					"            });",
					"        }",
					"",
					"        postRequests = [{",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_accounts}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(accounts)",
					"            }",
					"        }, {",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_account_holders}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(account_holders)",
					"            }",
					"        }];",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"    },",
					"",
					"/**",
					" * Creates a new entity in the graph database with the given entity identifier.",
					" *",
					" * @param {string} entityId - Mandatory. Identifier for the new entity.",
					" */",
					"",
					"    createEntity: function (entityId) {",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_entities = _pm.environment.get('db_coll_graph_entities');",
					"        const entitiesPrefix = 'entities/';",
					"",
					"        // Essential defaults",
					"        const timestamp = new Date(new Date(Date.now())).toISOString();",
					"",
					"        const entities = [{",
					"            \"_key\": entityId,",
					"            \"Id\": entityId,",
					"            \"CreDtTm\": timestamp",
					"        }];",
					"",
					"        postRequests = [{",
					"            url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_entities}`,",
					"            method: 'POST',",
					"            header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify(entities)",
					"            }",
					"        }];",
					"",
					"        postRequests.forEach((postRequest) => {",
					"            _pm.sendRequest(postRequest, (error, response) => {",
					"                console.log(error ? error : response.json());",
					"            });",
					"        });",
					"    },",
					"",
					"/**",
					" * Creates multiple sets of transactions for testing purposes, each with its own unique identifiers and timestamps, and includes all necessary data and database operations.",
					" * This function allows more rapid transactions compared to the `createNewTransactionSet` or `createMoreTransactionSets` functions that separates transactions with a .",
					" * The transaction sets will include pain.001/013 messages if the environment variable activePain001 = true.",
					" * The transaction set will contain a pacs.008 and a pacs.002 message.",
					" * The messages in the set will be linked through the same EndToEndId.",
					" * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					" *",
					" * @param {number|null|undefined} [numberOfSets=1] - The number of transaction sets to create. Defaults to 1.",
					" * @param {string|null|undefined} [debtorIdRef=null] - Reference identifier for the debtor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					" * @param {string|null|undefined} [debtorAccountIdRef=null] - Reference account identifier for the debtor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					" * @param {string|null|undefined} [creditorIdRef=null] - Reference identifier for the creditor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					" * @param {string|null|undefined} [creditorAccountIdRef=null] - Reference account identifier for the creditor. If provided, this ID will be used for all transaction sets. Defaults to null, which means a new ID will be generated for each set.",
					" * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					" * @param {number|null|undefined} [timestampIterationLeap] - The leap in milliseconds between each transaction set's timestamp. Defaults to the total epoch divided by the number of sets or 0 if only one set is created.",
					" * @param {number|null|undefined} [timestampInterval=300000] - Interval in milliseconds between different types of messages within a transaction set. Defaults to 300,000 milliseconds (5 minutes).",
					" * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					" * @param {number|null|undefined} [amountRef=null] - Reference amount for the transaction. If provided, this amount will be used for all transaction sets. Defaults to null, which means a random amount will be generated for each set.",
					" * @param {string|null|undefined} [transactionDescriptionRef=null] - Reference description for the transaction. If provided, this description will be used for all transaction sets. Defaults to null, which means a random description will be generated for each set.",
					" * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successful transaction).",
					" * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					" * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					" * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					" * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					" */",
					"",
					"    createQuickerTransactionSets: function (numberOfSets, debtorIdRef, debtorAccountIdRef, creditorIdRef, creditorAccountIdRef, timestampEpoch, timestampIterationLeap, timestampInterval, currency, amountRef, transactionDescriptionRef, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"        let uuid = require('uuid');",
					"",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"        const arangoUrl = _pm.environment.get('arangoUrl');",
					"        const db_messagehistory = _pm.environment.get('db_messagehistory');",
					"        const db_historygraph = _pm.environment.get('db_historygraph');",
					"        const db_coll_graph_transactions = _pm.environment.get('db_coll_graph_transactions');",
					"",
					"        var db_coll_msg_transactionHistoryPain001;",
					"        var db_coll_msg_transactionHistoryPain013;",
					"        if (activePain001) {",
					"            db_coll_msg_transactionHistoryPain001 = _pm.environment.get('db_coll_msg_transactionHistoryPain001');",
					"            db_coll_msg_transactionHistoryPain013 = _pm.environment.get('db_coll_msg_transactionHistoryPain013');",
					"        }",
					"        const db_coll_msg_transactionHistoryPacs008 = _pm.environment.get('db_coll_msg_transactionHistoryPacs008');",
					"        const db_coll_msg_transactionHistoryPacs002 = _pm.environment.get('db_coll_msg_transactionHistoryPacs002');",
					"        const accountsPrefix = 'accounts/';",
					"",
					"        // Variables for test data parameterisation",
					"",
					"        // Essential defaults",
					"        numberOfSets = numberOfSets ? numberOfSets : 1;",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        if (numberOfSets == 1) {",
					"            timestampIterationLeap = 0",
					"        } else {",
					"            timestampIterationLeap = timestampIterationLeap ? timestampIterationLeap : Math.trunc(timestampEpoch / numberOfSets)",
					"        }",
					"        timestampInterval = timestampInterval ? timestampInterval : 300000; // 300,000 milliseconds = 5 minutes",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        timestampEpochStart = timestampEpoch;",
					"",
					"        for (let step = 0; step < numberOfSets; step++) {",
					"            // Match incoming parameter or randomise",
					"            let debtorId = debtorIdRef || 'dbtr_' + uuid.v4().replace(/-/g, '');",
					"            let debtorAccountId = debtorAccountIdRef || 'dbtrAcct_' + uuid.v4().replace(/-/g, '');",
					"            let creditorId = creditorIdRef || 'cdtr_' + uuid.v4().replace(/-/g, '');",
					"            let creditorAccountId = creditorAccountIdRef || 'cdtrAcct_' + uuid.v4().replace(/-/g, '');",
					"            let amount = amountRef || Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"            let transactionDescription = transactionDescriptionRef || uuid.v4().replace(/-/g, '');",
					"",
					"            let timestampPacs008 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 1)).toISOString();",
					"            let timestampPacs002 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 0)).toISOString();",
					"",
					"            if (!debtorIdRef) {",
					"                utils.createEntity(debtorId);",
					"            }",
					"            if (!creditorIdRef) {",
					"                utils.createEntity(creditorId);",
					"            }",
					"            if (!debtorAccountIdRef) {",
					"                utils.createSingleAccount(debtorId, debtorAccountId, timestampPacs008);",
					"            }",
					"            if (!creditorAccountIdRef) {",
					"                utils.createSingleAccount(creditorId, creditorAccountId, timestampPacs008);",
					"            }",
					"",
					"            let endToEndId = uuid.v4().replace(/-/g, '');",
					"            let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"            let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"            var timestampPain001;",
					"            var timestampPain013;",
					"            var messageIdPain001;",
					"            var messageIdPain013;",
					"",
					"            var pain001;",
					"            var pain013;",
					"",
					"            if (activePain001) {",
					"                timestampPain001 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 3)).toISOString();",
					"                timestampPain013 = new Date(new Date(Date.now() - timestampEpochStart + (timestampIterationLeap * step) - timestampInterval * 2)).toISOString();",
					"                messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"                messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"                pain001 = [utils.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorAccountId, endToEndId, transactionPurpose, currency, amount, creditorId, creditorAccountId, transactionDescription, transactionLat, transactionLong)];",
					"",
					"                pain013 = [utils.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorAccountId, endToEndId, currency, amount, creditorId, creditorAccountId, transactionLat, transactionLong)];",
					"            }",
					"",
					"            const pacs008 = [utils.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorAccountId, creditorId, creditorAccountId, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            const pacs002 = [utils.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"            var transactions = [];",
					"            var postRequests = [];",
					"",
					"            if (activePain001) {",
					"                transactions = utils.prepGraphTransactions(accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts, timestampPain001, messageIdPain001, timestampPain013, messageIdPain013);",
					"",
					"                postRequests = [{",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain001}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pain001)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPain013}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pain013)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs008)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs002)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(transactions)",
					"                    }",
					"                }];",
					"            } else {",
					"                transactions = utils.prepGraphTransactions(accountsPrefix, debtorAccountId, creditorAccountId, currency, amount, endToEndId, timestampPacs008, messageIdPacs008, timestampPacs002, messageIdPacs002, pacs002Sts);",
					"",
					"                postRequests = [{",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs008}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs008)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_messagehistory}/_api/document/${db_coll_msg_transactionHistoryPacs002}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(pacs002)",
					"                    }",
					"                }, {",
					"                    url: `${arangoUrl}/_db/${db_historygraph}/_api/document/${db_coll_graph_transactions}`,",
					"                    method: 'POST',",
					"                    header: { 'Authorization': `Bearer ${_pm.globals.get(\"arangoToken\")}` },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify(transactions)",
					"                    }",
					"                }];",
					"            }",
					"",
					"            postRequests.forEach((postRequest) => {",
					"                _pm.sendRequest(postRequest, (error, response) => {",
					"                    console.log(error ? error : response.json());",
					"                });",
					"            });",
					"",
					"            if (activePain001) {",
					"                console.log(`Created transaction set ${step + 1}/${numberOfSets} from ${debtorAccountId} to ${creditorAccountId} from pain.001:${timestampPain001} to pacs.002:${timestampPacs002} with EndToEndId ${endToEndId}`);",
					"            } else {",
					"                console.log(`Created transaction set ${step + 1}/${numberOfSets} from ${debtorAccountId} to ${creditorAccountId} from pacs.008:${timestampPacs008} to pacs.002${timestampPacs002} with EndToEndId ${endToEndId}`);",
					"            }",
					"",
					"        }",
					"    },",
					"",
					"/**",
					" * Creates a new set of transactions for testing purposes, including all necessary data, and stores it in memory so that the transactions can be submitted to the API in sequence as valid messages.",
					" * The transaction sets will include pain.001/013 messages if the environment variable activePain001 = true.",
					" * The transaction set will contain a pacs.008 and a pacs.002 message.",
					" * The messages in the set will be linked through the same EndToEndId.",
					" * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					" *",
					" * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					" * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					" * @param {number|null|undefined} [amount] - Transaction amount. Defaults to a random value between 10 and 1000.",
					" * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction. Defaults to 'Generic payment description'.",
					" * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successful transaction).",
					" * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					" * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					" * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					" * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					" */",
					"",
					"    createNewTransactionSetInMemory: function (timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        let uuid = require('uuid');",
					"",
					"        // Variables for test data parameterisation",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = uuid.v4().replace(/-/g, '');",
					"        let creditorId = uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        console.log(\"pacs.002 payload timestamp: \" + timestampPacs002);",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"            pain001 = [utils.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorAccountId, endToEndId, transactionPurpose, currency, amount, creditorId, creditorAccountId, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [utils.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorAccountId, endToEndId, currency, amount, creditorId, creditorAccountId, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [utils.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorAccountId, creditorId, creditorAccountId, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"        const pacs002 = [utils.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        const dataCache = [{",
					"            \"dbtrId\": `${debtorId}`,",
					"            \"cdtrId\": `${creditorId}`,",
					"            \"dbtrAcctId\": `${debtorAccountId}`,",
					"            \"cdtrAcctId\": `${creditorAccountId}`,",
					"            \"creDtTm\": `${baseCreDtTm}`,",
					"            \"amt\": {",
					"                \"amt\": amount,",
					"                \"ccy\": `${currency}`",
					"            }",
					"        }];",
					"",
					"        console.log('pacs.002 trigger payload: ' + JSON.stringify(pacs002[0]));",
					"",
					"        _pm.globals.set(\"pacs008\", JSON.stringify(pacs008[0]));",
					"        _pm.globals.set(\"pacs002\", JSON.stringify(pacs002[0]));",
					"        _pm.globals.set(\"dataCache\", JSON.stringify(dataCache[0]));",
					"        _pm.globals.set('debtorId', debtorId);",
					"        _pm.globals.set('debtorAccountId', debtorAccountId);",
					"        _pm.globals.set('debtorDoB', debtorDoB);",
					"        _pm.globals.set('creditorId', creditorId);",
					"        _pm.globals.set('creditorAccountId', creditorAccountId);",
					"        _pm.globals.set('timestampPacs008', timestampPacs008);",
					"        _pm.globals.set('timestampPacs002', timestampPacs002);",
					"        _pm.globals.set('endToEndId', endToEndId);",
					"        _pm.globals.set('pacs002Sts', pacs002Sts);",
					"        _pm.globals.set('currency', currency);",
					"        _pm.globals.set('amount', amount);",
					"        _pm.globals.set('transactionDescription', transactionDescription);",
					"        _pm.globals.set('transactionPurpose', transactionPurpose);",
					"        _pm.globals.set('transactionLat', transactionLat);",
					"        _pm.globals.set('transactionLong', transactionLong);",
					"        _pm.globals.set('messageIdPacs008', messageIdPacs008);",
					"        _pm.globals.set('messageIdPacs002', messageIdPacs002);",
					"        _pm.globals.set('baseTimestamp', timestampPacs008);",
					"        if (activePain001) {",
					"            _pm.globals.set(\"pain001\", JSON.stringify(pain001[0]));",
					"            _pm.globals.set(\"pain013\", JSON.stringify(pain013[0]));",
					"            _pm.globals.set('timestampPain001', timestampPain001);",
					"            _pm.globals.set('timestampPain013', timestampPain013);",
					"            _pm.globals.set('messageIdPain001', messageIdPain001);",
					"            _pm.globals.set('messageIdPain013', messageIdPain013);",
					"            _pm.globals.set('baseTimestamp', timestampPain001);",
					"        }",
					"",
					"        console.log(`",
					"{",
					"  \"DataCache\": {",
					"    \"dbtrId\": \"${_pm.globals.get(\"debtorId\")}\",",
					"    \"cdtrId\": \"${_pm.globals.get(\"creditorId\")}\",",
					"    \"dbtrAcctId\": \"${_pm.globals.get(\"debtorAccountId\")}\",",
					"    \"cdtrAcctId\": \"${_pm.globals.get(\"creditorAccountId\")}\"",
					"    \"creDtTm\": \"${_pm.globals.get(\"baseTimestamp\")}\",",
					"    \"amt\": {",
					"        \"amt\": ${_pm.globals.get(\"amount\")},",
					"        \"curr\": \"${_pm.globals.get(\"currency\")}\"",
					"  },",
					"  \"endToEndId\": \"${_pm.globals.get(\"endToEndId\")}\"",
					"}",
					"        `);",
					"",
					"",
					"        if (activePain001) {",
					"            console.log(`Message IDs:",
					"                pain.001: ${_pm.globals.get(\"messageIdPain001\")}\",",
					"                pain.013: ${_pm.globals.get(\"messageIdPain013\")}\",",
					"                pacs.008: ${_pm.globals.get(\"messageIdPacs008\")}\",",
					"                pacs.002: ${_pm.globals.get(\"messageIdPacs002\")}\"",
					"            `);",
					"        } else {",
					"            console.log(`Message IDs:",
					"                pain.001: disabled\",",
					"                pain.013: disabled\",",
					"                pacs.008: ${_pm.globals.get(\"messageIdPacs008\")}\",",
					"                pacs.002: ${_pm.globals.get(\"messageIdPacs002\")}\"",
					"            `);",
					"        }",
					"    },",
					"",
					"/**",
					" * Creates an additional set of transactions for testing purposes, including all necessary data, and stores it in memory so that the transactions can be submitted to the API in sequence as valid messages.",
					" * The transaction sets will include pain.001/013 messages if the environment variable activePain001 = true.",
					" * The transaction set will contain a pacs.008 and a pacs.002 message.",
					" * The messages in the set will be linked through the same EndToEndId.",
					" * The function stashes created data in global variables can be retrieved with the `pm.globals.get()` method.",
					" *",
					" * @param {string|null|undefined} [debtorIdRef=null] - Reference identifier for the debtor. If provided, this ID will be used. Defaults to null, which means a new ID will be generated.",
					" * @param {string|null|undefined} [debtorAccountIdRef=null] - Reference account identifier for the debtor. If provided, this ID will be used. Defaults to null, which means a new ID will be generated.",
					" * @param {string|null|undefined} [creditorIdRef=null] - Reference identifier for the creditor. If provided, this ID will be used. Defaults to null, which means a new ID will be generated.",
					" * @param {string|null|undefined} [creditorAccountIdRef=null] - Reference account identifier for the creditor. If provided, this ID will be used. Defaults to null, which means a new ID will be generated.",
					" * @param {number|null|undefined} [timestampEpoch=0] - Epoch timestamp for adjusting transaction timestamps. Defaults to 0.",
					" * @param {string|null|undefined} [currency='XTS'] - Currency code for the transaction amount. Defaults to 'XTS'.",
					" * @param {number|null|undefined} [amount] - Transaction amount. Defaults to a random value between 10 and 1000.",
					" * @param {string|null|undefined} [transactionDescription='Generic payment description'] - Description of the transaction. Defaults to 'Generic payment description'.",
					" * @param {string|null|undefined} [pacs002Sts='ACCC'] - Transaction status for pacs.002.001.12 message. Defaults to 'ACCC' (a successful transaction).",
					" * @param {number|null|undefined} [debtorAge=25] - Age of the debtor. Defaults to 25.",
					" * @param {string|null|undefined} [transactionPurpose] - Purpose of the transaction. Defaults to 'TRANSFER' if pain.001/013 ingestion is enabled, otherwise 'MP2P'.",
					" * @param {number|null|undefined} [transactionLat=-3.1609] - Latitude coordinate of the transaction location. Defaults to -3.1609.",
					" * @param {number|null|undefined} [transactionLong=38.3588] - Longitude coordinate of the transaction location. Defaults to 38.3588.",
					" */",
					"",
					"    createAdditionalTransactionSetInMemory: function (debtorIdRef, debtorAccountIdRef, creditorIdRef, creditorAccountIdRef, timestampEpoch, currency, amount, transactionDescription, pacs002Sts, debtorAge, transactionPurpose, transactionLat, transactionLong) {",
					"",
					"        let uuid = require('uuid');",
					"",
					"        // Variables for test data parameterisation",
					"        const activePain001 = JSON.parse(_pm.environment.get('activePain001'));",
					"        activePain001 ? console.log(\"pain.001/013 ingestion is enabled\") : console.log(\"pain.001/013 ingestion is disabled\");",
					"",
					"        // Essential defaults",
					"        timestampEpoch = timestampEpoch ? timestampEpoch : 0;",
					"        currency = currency ? currency : 'XTS';",
					"        amount = amount ? amount : Math.round((Math.random() * (1000 - 10) + 10) * 100) / 100;",
					"        transactionDescription = transactionDescription ? transactionDescription : 'Generic payment description';",
					"        pacs002Sts = pacs002Sts ? pacs002Sts : 'ACCC';",
					"        debtorAge = debtorAge ? debtorAge : 25;",
					"        if (activePain001) {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'TRANSFER' // or 'WITHDRAWAL', or 'PAYMENT'",
					"        } else {",
					"            transactionPurpose = transactionPurpose ? transactionPurpose : 'MP2P' // or 'MP2B', or 'CASH'",
					"        }",
					"        transactionLat = transactionLat ? transactionLat : -3.1609",
					"        transactionLong = transactionLong ? transactionLong : 38.3588",
					"",
					"        // Defaults",
					"        const timestampInterval = 300000; // 300,000 milliseconds = 5 minutes",
					"        let debtorId = debtorIdRef || 'dbtr_' + uuid.v4().replace(/-/g, '');",
					"        let debtorAccountId = debtorAccountIdRef || 'dbtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let creditorId = creditorIdRef || 'cdtr_' + uuid.v4().replace(/-/g, '');",
					"        let creditorAccountId = creditorAccountIdRef || 'cdtrAcct_' + uuid.v4().replace(/-/g, '');",
					"        let debtorDoB = new Date(new Date().setDate(new Date().getDate() - (debtorAge * 366))).toISOString().substring(0, 10);",
					"        let timestampPacs008 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 1)).toISOString();",
					"        let timestampPacs002 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 0)).toISOString();",
					"        console.log(\"pacs.002 payload timestamp: \" + timestampPacs002);",
					"        let endToEndId = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs008 = uuid.v4().replace(/-/g, '');",
					"        let messageIdPacs002 = uuid.v4().replace(/-/g, '');",
					"",
					"        var timestampPain001;",
					"        var timestampPain013;",
					"        var messageIdPain001;",
					"        var messageIdPain013;",
					"",
					"        var pain001;",
					"        var pain013;",
					"        var baseCreDtTm;",
					"",
					"        if (activePain001) {",
					"            timestampPain001 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 3)).toISOString();",
					"            timestampPain013 = new Date(new Date(Date.now() - timestampEpoch - timestampInterval * 2)).toISOString();",
					"            messageIdPain001 = uuid.v4().replace(/-/g, '');",
					"            messageIdPain013 = uuid.v4().replace(/-/g, '');",
					"",
					"            pain001 = [utils.prepPain001Msg(messageIdPain001, timestampPain001, debtorDoB, debtorId, debtorAccountId, endToEndId, transactionPurpose, currency, amount, creditorId, creditorAccountId, transactionDescription, transactionLat, transactionLong)];",
					"",
					"            pain013 = [utils.prepPain013Msg(messageIdPain013, timestampPain013, debtorDoB, debtorId, debtorAccountId, endToEndId, currency, amount, creditorId, creditorAccountId, transactionLat, transactionLong)];",
					"            baseCreDtTm = timestampPain001;",
					"        } else {",
					"            baseCreDtTm = timestampPacs008;",
					"        }",
					"",
					"        const pacs008 = [utils.prepPacs008Msg(messageIdPacs008, timestampPacs008, endToEndId, currency, amount, debtorDoB, debtorId, debtorAccountId, creditorId, creditorAccountId, transactionPurpose, transactionDescription, transactionLat, transactionLong)];",
					"",
					"        const pacs002 = [utils.prepPacs002Msg(messageIdPacs002, timestampPacs002, endToEndId, pacs002Sts)];",
					"",
					"        const dataCache = [{",
					"            \"dbtrId\": `${debtorId}`,",
					"            \"cdtrId\": `${creditorId}`,",
					"            \"dbtrAcctId\": `${debtorAccountId}`,",
					"            \"cdtrAcctId\": `${creditorAccountId}`,",
					"            \"creDtTm\": `${baseCreDtTm}`,",
					"            \"amt\": {",
					"                \"amt\": amount,",
					"                \"ccy\": `${currency}`",
					"            }",
					"        }];",
					"",
					"        console.log('pacs.002 trigger payload: ' + JSON.stringify(pacs002[0]));",
					"",
					"        _pm.globals.set(\"pacs008\", JSON.stringify(pacs008[0]));",
					"        _pm.globals.set(\"pacs002\", JSON.stringify(pacs002[0]));",
					"        _pm.globals.set(\"dataCache\", JSON.stringify(dataCache[0]));",
					"        _pm.globals.set('debtorId', debtorId);",
					"        _pm.globals.set('debtorAccountId', debtorAccountId);",
					"        _pm.globals.set('debtorDoB', debtorDoB);",
					"        _pm.globals.set('creditorId', creditorId);",
					"        _pm.globals.set('creditorAccountId', creditorAccountId);",
					"        _pm.globals.set('timestampPacs008', timestampPacs008);",
					"        _pm.globals.set('timestampPacs002', timestampPacs002);",
					"        _pm.globals.set('endToEndId', endToEndId);",
					"        _pm.globals.set('pacs002Sts', pacs002Sts);",
					"        _pm.globals.set('currency', currency);",
					"        _pm.globals.set('amount', amount);",
					"        _pm.globals.set('transactionDescription', transactionDescription);",
					"        _pm.globals.set('transactionPurpose', transactionPurpose);",
					"        _pm.globals.set('transactionLat', transactionLat);",
					"        _pm.globals.set('transactionLong', transactionLong);",
					"        _pm.globals.set('messageIdPacs008', messageIdPacs008);",
					"        _pm.globals.set('messageIdPacs002', messageIdPacs002);",
					"        _pm.globals.set('baseTimestamp', timestampPacs008);",
					"        if (activePain001) {",
					"            _pm.globals.set(\"pain001\", JSON.stringify(pain001[0]));",
					"            _pm.globals.set(\"pain013\", JSON.stringify(pain013[0]));",
					"            _pm.globals.set('timestampPain001', timestampPain001);",
					"            _pm.globals.set('timestampPain013', timestampPain013);",
					"            _pm.globals.set('messageIdPain001', messageIdPain001);",
					"            _pm.globals.set('messageIdPain013', messageIdPain013);",
					"            _pm.globals.set('baseTimestamp', timestampPain001);",
					"        }",
					"",
					"        console.log(`",
					"{",
					"  \"DataCache\": {",
					"    \"dbtrId\": \"${_pm.globals.get(\"debtorId\")}\",",
					"    \"cdtrId\": \"${_pm.globals.get(\"creditorId\")}\",",
					"    \"dbtrAcctId\": \"${_pm.globals.get(\"debtorAccountId\")}\",",
					"    \"cdtrAcctId\": \"${_pm.globals.get(\"creditorAccountId\")}\"",
					"    \"creDtTm\": \"${_pm.globals.get(\"baseTimestamp\")}\",",
					"    \"amt\": {",
					"        \"amt\": ${_pm.globals.get(\"amount\")},",
					"        \"curr\": \"${_pm.globals.get(\"currency\")}\"",
					"  },",
					"  \"endToEndId\": \"${_pm.globals.get(\"endToEndId\")}\"",
					"}",
					"        `);",
					"",
					"        if (activePain001) {",
					"            console.log(`Message IDs:",
					"                pain.001: ${_pm.globals.get(\"messageIdPain001\")}\",",
					"                pain.013: ${_pm.globals.get(\"messageIdPain013\")}\",",
					"                pacs.008: ${_pm.globals.get(\"messageIdPacs008\")}\",",
					"                pacs.002: ${_pm.globals.get(\"messageIdPacs002\")}\"",
					"            `);",
					"        } else {",
					"            console.log(`Message IDs:",
					"                pain.001: disabled\",",
					"                pain.013: disabled\",",
					"                pacs.008: ${_pm.globals.get(\"messageIdPacs008\")}\",",
					"                pacs.002: ${_pm.globals.get(\"messageIdPacs002\")}\"",
					"            `);",
					"        }",
					"    }",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	]
}